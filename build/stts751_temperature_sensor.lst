ARM GAS  C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"stts751_temperature_sensor.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Core/Src/stts751_temperature_sensor.c"
  18              		.section	.text.stts751_init,"ax",%progbits
  19              		.align	1
  20              		.global	stts751_init
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	stts751_init:
  26              	.LVL0:
  27              	.LFB65:
   1:Core/Src/stts751_temperature_sensor.c **** #include "main.h"
   2:Core/Src/stts751_temperature_sensor.c **** #include "stts751_temperature_sensor.h"
   3:Core/Src/stts751_temperature_sensor.c **** 
   4:Core/Src/stts751_temperature_sensor.c **** /* STTS751 Registers */
   5:Core/Src/stts751_temperature_sensor.c **** const uint8_t STTS751_HIGH_BYTE_REG = 0x00;
   6:Core/Src/stts751_temperature_sensor.c **** const uint8_t STTS751_STATUS_REG    = 0x01;
   7:Core/Src/stts751_temperature_sensor.c **** const uint8_t STTS751_LOW_BYTE_REG  = 0x02;
   8:Core/Src/stts751_temperature_sensor.c **** const uint8_t STTS751_CONF_REG      = 0x03;
   9:Core/Src/stts751_temperature_sensor.c **** const uint8_t STTS751_CONV_REG      = 0x04;
  10:Core/Src/stts751_temperature_sensor.c **** const uint8_t STTS751_ADDR_REG      = 0x94;
  11:Core/Src/stts751_temperature_sensor.c **** 
  12:Core/Src/stts751_temperature_sensor.c **** /* STTS751 Data */
  13:Core/Src/stts751_temperature_sensor.c **** const uint8_t STTS751_CONF_DATA     = 0x8C;
  14:Core/Src/stts751_temperature_sensor.c **** const uint8_t STTS751_CONV_DATA     = 0x07;
  15:Core/Src/stts751_temperature_sensor.c **** const uint8_t STTS751_REG_SIZE      = 0x01;
  16:Core/Src/stts751_temperature_sensor.c **** const uint8_t STTS751_DATA_SIZE     = 0x01;
  17:Core/Src/stts751_temperature_sensor.c **** 
  18:Core/Src/stts751_temperature_sensor.c **** int stts751_init(I2C_HandleTypeDef *ptr_i2c1)
  19:Core/Src/stts751_temperature_sensor.c **** {
  28              		.loc 1 19 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 19 1 is_stmt 0 view .LVU1
  33 0000 00B5     		push	{lr}
  34              		.cfi_def_cfa_offset 4
  35              		.cfi_offset 14, -4
  36 0002 85B0     		sub	sp, sp, #20
  37              		.cfi_def_cfa_offset 24
  20:Core/Src/stts751_temperature_sensor.c ****     uint8_t write_memory_ok = 1;
  38              		.loc 1 20 5 is_stmt 1 view .LVU2
ARM GAS  C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s 			page 2


  39              	.LVL1:
  21:Core/Src/stts751_temperature_sensor.c ****     HAL_StatusTypeDef write_conf_reg;
  40              		.loc 1 21 5 view .LVU3
  22:Core/Src/stts751_temperature_sensor.c ****     
  23:Core/Src/stts751_temperature_sensor.c ****     write_conf_reg = HAL_I2C_Mem_Write(ptr_i2c1, STTS751_ADDR_REG, STTS751_CONF_REG,
  41              		.loc 1 23 5 view .LVU4
  42              		.loc 1 23 22 is_stmt 0 view .LVU5
  43 0004 3223     		movs	r3, #50
  44 0006 0293     		str	r3, [sp, #8]
  45 0008 0123     		movs	r3, #1
  46 000a 0193     		str	r3, [sp, #4]
  47 000c 8C22     		movs	r2, #140
  48 000e 0092     		str	r2, [sp]
  49 0010 0322     		movs	r2, #3
  50 0012 9421     		movs	r1, #148
  51 0014 FFF7FEFF 		bl	HAL_I2C_Mem_Write
  52              	.LVL2:
  24:Core/Src/stts751_temperature_sensor.c ****                      STTS751_DATA_SIZE, STTS751_CONF_DATA, STTS751_DATA_SIZE, 50);
  25:Core/Src/stts751_temperature_sensor.c **** 
  26:Core/Src/stts751_temperature_sensor.c ****     switch (write_conf_reg)
  53              		.loc 1 26 5 is_stmt 1 view .LVU6
  54 0018 0128     		cmp	r0, #1
  55 001a 03D0     		beq	.L3
  20:Core/Src/stts751_temperature_sensor.c ****     HAL_StatusTypeDef write_conf_reg;
  56              		.loc 1 20 13 is_stmt 0 view .LVU7
  57 001c 0120     		movs	r0, #1
  58              	.LVL3:
  59              	.L2:
  27:Core/Src/stts751_temperature_sensor.c ****     {
  28:Core/Src/stts751_temperature_sensor.c ****     case !HAL_OK:
  29:Core/Src/stts751_temperature_sensor.c ****         write_memory_ok = 0;
  30:Core/Src/stts751_temperature_sensor.c ****         break;
  31:Core/Src/stts751_temperature_sensor.c ****     
  32:Core/Src/stts751_temperature_sensor.c ****     default:
  33:Core/Src/stts751_temperature_sensor.c ****         break;
  34:Core/Src/stts751_temperature_sensor.c ****     }
  35:Core/Src/stts751_temperature_sensor.c **** 
  36:Core/Src/stts751_temperature_sensor.c ****     /* TODO Skriv til conv reg */
  37:Core/Src/stts751_temperature_sensor.c **** 
  38:Core/Src/stts751_temperature_sensor.c ****     return write_memory_ok;
  60              		.loc 1 38 5 is_stmt 1 view .LVU8
  39:Core/Src/stts751_temperature_sensor.c **** }
  61              		.loc 1 39 1 is_stmt 0 view .LVU9
  62 001e 05B0     		add	sp, sp, #20
  63              		.cfi_remember_state
  64              		.cfi_def_cfa_offset 4
  65              		@ sp needed
  66 0020 5DF804FB 		ldr	pc, [sp], #4
  67              	.LVL4:
  68              	.L3:
  69              		.cfi_restore_state
  29:Core/Src/stts751_temperature_sensor.c ****         break;
  70              		.loc 1 29 25 view .LVU10
  71 0024 0020     		movs	r0, #0
  72              	.LVL5:
  29:Core/Src/stts751_temperature_sensor.c ****         break;
  73              		.loc 1 29 25 view .LVU11
ARM GAS  C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s 			page 3


  74 0026 FAE7     		b	.L2
  75              		.cfi_endproc
  76              	.LFE65:
  78              		.global	__aeabi_i2f
  79              		.global	__aeabi_fmul
  80              		.section	.text.stts751_read_temperature,"ax",%progbits
  81              		.align	1
  82              		.global	stts751_read_temperature
  83              		.syntax unified
  84              		.thumb
  85              		.thumb_func
  87              	stts751_read_temperature:
  88              	.LVL6:
  89              	.LFB66:
  40:Core/Src/stts751_temperature_sensor.c **** 
  41:Core/Src/stts751_temperature_sensor.c **** float stts751_read_temperature(I2C_HandleTypeDef *ptr_i2c1)
  42:Core/Src/stts751_temperature_sensor.c **** {
  90              		.loc 1 42 1 is_stmt 1 view -0
  91              		.cfi_startproc
  92              		@ args = 0, pretend = 0, frame = 8
  93              		@ frame_needed = 0, uses_anonymous_args = 0
  94              		.loc 1 42 1 is_stmt 0 view .LVU13
  95 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  96              		.cfi_def_cfa_offset 20
  97              		.cfi_offset 4, -20
  98              		.cfi_offset 5, -16
  99              		.cfi_offset 6, -12
 100              		.cfi_offset 7, -8
 101              		.cfi_offset 14, -4
 102 0002 87B0     		sub	sp, sp, #28
 103              		.cfi_def_cfa_offset 48
 104 0004 0646     		mov	r6, r0
  43:Core/Src/stts751_temperature_sensor.c ****     uint8_t temperature_high;
 105              		.loc 1 43 5 is_stmt 1 view .LVU14
  44:Core/Src/stts751_temperature_sensor.c ****     uint8_t temperature_low;
 106              		.loc 1 44 5 view .LVU15
  45:Core/Src/stts751_temperature_sensor.c ****     int16_t temperature_combined;
 107              		.loc 1 45 5 view .LVU16
  46:Core/Src/stts751_temperature_sensor.c ****     HAL_StatusTypeDef read_high_byte_status;
 108              		.loc 1 46 5 view .LVU17
  47:Core/Src/stts751_temperature_sensor.c ****     HAL_StatusTypeDef read_low_byte_status;
 109              		.loc 1 47 5 view .LVU18
  48:Core/Src/stts751_temperature_sensor.c ****     float temperature = 0.0f;
 110              		.loc 1 48 5 view .LVU19
 111              	.LVL7:
  49:Core/Src/stts751_temperature_sensor.c **** 
  50:Core/Src/stts751_temperature_sensor.c ****     read_high_byte_status = HAL_I2C_Mem_Read(ptr_i2c1, STTS751_ADDR_REG, STTS751_HIGH_BYTE_REG,
 112              		.loc 1 50 5 view .LVU20
 113              		.loc 1 50 29 is_stmt 0 view .LVU21
 114 0006 4FF0FF37 		mov	r7, #-1
 115 000a 0297     		str	r7, [sp, #8]
 116 000c 0124     		movs	r4, #1
 117 000e 0194     		str	r4, [sp, #4]
 118 0010 0DF11703 		add	r3, sp, #23
 119 0014 0093     		str	r3, [sp]
 120 0016 2346     		mov	r3, r4
 121 0018 0022     		movs	r2, #0
ARM GAS  C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s 			page 4


 122 001a 9421     		movs	r1, #148
 123 001c FFF7FEFF 		bl	HAL_I2C_Mem_Read
 124              	.LVL8:
 125              		.loc 1 50 29 view .LVU22
 126 0020 0546     		mov	r5, r0
 127              	.LVL9:
  51:Core/Src/stts751_temperature_sensor.c ****                             STTS751_REG_SIZE, &temperature_high, STTS751_DATA_SIZE, HAL_MAX_DELAY);
  52:Core/Src/stts751_temperature_sensor.c **** 
  53:Core/Src/stts751_temperature_sensor.c ****     read_low_byte_status = HAL_I2C_Mem_Read(ptr_i2c1, STTS751_ADDR_REG, STTS751_LOW_BYTE_REG,
 128              		.loc 1 53 5 is_stmt 1 view .LVU23
 129              		.loc 1 53 28 is_stmt 0 view .LVU24
 130 0022 0297     		str	r7, [sp, #8]
 131 0024 0194     		str	r4, [sp, #4]
 132 0026 0DF11603 		add	r3, sp, #22
 133 002a 0093     		str	r3, [sp]
 134 002c 2346     		mov	r3, r4
 135 002e 0222     		movs	r2, #2
 136 0030 9421     		movs	r1, #148
 137 0032 3046     		mov	r0, r6
 138 0034 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 139              	.LVL10:
  54:Core/Src/stts751_temperature_sensor.c ****                             STTS751_REG_SIZE, &temperature_low, STTS751_DATA_SIZE, HAL_MAX_DELAY);
  55:Core/Src/stts751_temperature_sensor.c **** 
  56:Core/Src/stts751_temperature_sensor.c ****     if (read_high_byte_status || read_high_byte_status != HAL_OK)
 140              		.loc 1 56 5 is_stmt 1 view .LVU25
 141              		.loc 1 56 8 is_stmt 0 view .LVU26
 142 0038 ADB9     		cbnz	r5, .L8
  57:Core/Src/stts751_temperature_sensor.c ****     {
  58:Core/Src/stts751_temperature_sensor.c ****         temperature = -999.0f; /* Error value */
  59:Core/Src/stts751_temperature_sensor.c ****     }
  60:Core/Src/stts751_temperature_sensor.c ****     else
  61:Core/Src/stts751_temperature_sensor.c ****     {  
  62:Core/Src/stts751_temperature_sensor.c ****         temperature_combined = (temperature_combined | temperature_high) << 8;
 143              		.loc 1 62 9 is_stmt 1 view .LVU27
 144              		.loc 1 62 54 is_stmt 0 view .LVU28
 145 003a 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 146              		.loc 1 62 30 view .LVU29
 147 003e 1B02     		lsls	r3, r3, #8
 148 0040 1BB2     		sxth	r3, r3
 149              	.LVL11:
  63:Core/Src/stts751_temperature_sensor.c ****         temperature_combined |= temperature_low;
 150              		.loc 1 63 9 is_stmt 1 view .LVU30
 151              		.loc 1 63 30 is_stmt 0 view .LVU31
 152 0042 9DF81620 		ldrb	r2, [sp, #22]	@ zero_extendqisi2
 153 0046 1343     		orrs	r3, r3, r2
 154              	.LVL12:
  64:Core/Src/stts751_temperature_sensor.c ****         temperature_combined >>= 4;
 155              		.loc 1 64 9 is_stmt 1 view .LVU32
 156              		.loc 1 64 30 is_stmt 0 view .LVU33
 157 0048 1811     		asrs	r0, r3, #4
 158              	.LVL13:
  65:Core/Src/stts751_temperature_sensor.c **** 
  66:Core/Src/stts751_temperature_sensor.c ****         if (temperature_combined & 0x800) { /* If the temperature is negative */
 159              		.loc 1 66 9 is_stmt 1 view .LVU34
 160              		.loc 1 66 12 is_stmt 0 view .LVU35
 161 004a 002B     		cmp	r3, #0
 162 004c 03DA     		bge	.L7
ARM GAS  C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s 			page 5


  67:Core/Src/stts751_temperature_sensor.c ****         temperature_combined |= 0xF000;
 163              		.loc 1 67 9 is_stmt 1 view .LVU36
 164              		.loc 1 67 30 is_stmt 0 view .LVU37
 165 004e 6FEA0050 		mvn	r0, r0, lsl #20
 166              	.LVL14:
 167              		.loc 1 67 30 view .LVU38
 168 0052 6FEA1050 		mvn	r0, r0, lsr #20
 169              	.LVL15:
 170              	.L7:
  68:Core/Src/stts751_temperature_sensor.c ****         }
  69:Core/Src/stts751_temperature_sensor.c ****         
  70:Core/Src/stts751_temperature_sensor.c ****         temperature = (float)temperature_combined * 0.0625f; // Convert to temperature with 0.0625 
 171              		.loc 1 70 9 is_stmt 1 view .LVU39
 172              		.loc 1 70 23 is_stmt 0 view .LVU40
 173 0056 FFF7FEFF 		bl	__aeabi_i2f
 174              	.LVL16:
 175              		.loc 1 70 21 view .LVU41
 176 005a 4FF07651 		mov	r1, #1031798784
 177 005e FFF7FEFF 		bl	__aeabi_fmul
 178              	.LVL17:
 179              	.L5:
  71:Core/Src/stts751_temperature_sensor.c ****     }
  72:Core/Src/stts751_temperature_sensor.c **** 
  73:Core/Src/stts751_temperature_sensor.c ****     return temperature;
  74:Core/Src/stts751_temperature_sensor.c **** }...
 180              		.loc 1 74 1 view .LVU42
 181 0062 07B0     		add	sp, sp, #28
 182              		.cfi_remember_state
 183              		.cfi_def_cfa_offset 20
 184              		@ sp needed
 185 0064 F0BD     		pop	{r4, r5, r6, r7, pc}
 186              	.LVL18:
 187              	.L8:
 188              		.cfi_restore_state
  58:Core/Src/stts751_temperature_sensor.c ****         temperature = -999.0f; /* Error value */
 189              		.loc 1 58 21 view .LVU43
 190 0066 0148     		ldr	r0, .L10
 191              	.LVL19:
  73:Core/Src/stts751_temperature_sensor.c ****     return temperature;
 192              		.loc 1 73 5 is_stmt 1 view .LVU44
  73:Core/Src/stts751_temperature_sensor.c ****     return temperature;
 193              		.loc 1 73 12 is_stmt 0 view .LVU45
 194 0068 FBE7     		b	.L5
 195              	.L11:
 196 006a 00BF     		.align	2
 197              	.L10:
 198 006c 00C079C4 		.word	-998653952
 199              		.cfi_endproc
 200              	.LFE66:
 202              		.global	STTS751_DATA_SIZE
 203              		.section	.rodata.STTS751_DATA_SIZE,"a"
 206              	STTS751_DATA_SIZE:
 207 0000 01       		.byte	1
 208              		.global	STTS751_REG_SIZE
 209              		.section	.rodata.STTS751_REG_SIZE,"a"
 212              	STTS751_REG_SIZE:
 213 0000 01       		.byte	1
ARM GAS  C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s 			page 6


 214              		.global	STTS751_CONV_DATA
 215              		.section	.rodata.STTS751_CONV_DATA,"a"
 218              	STTS751_CONV_DATA:
 219 0000 07       		.byte	7
 220              		.global	STTS751_CONF_DATA
 221              		.section	.rodata.STTS751_CONF_DATA,"a"
 224              	STTS751_CONF_DATA:
 225 0000 8C       		.byte	-116
 226              		.global	STTS751_ADDR_REG
 227              		.section	.rodata.STTS751_ADDR_REG,"a"
 230              	STTS751_ADDR_REG:
 231 0000 94       		.byte	-108
 232              		.global	STTS751_CONV_REG
 233              		.section	.rodata.STTS751_CONV_REG,"a"
 236              	STTS751_CONV_REG:
 237 0000 04       		.byte	4
 238              		.global	STTS751_CONF_REG
 239              		.section	.rodata.STTS751_CONF_REG,"a"
 242              	STTS751_CONF_REG:
 243 0000 03       		.byte	3
 244              		.global	STTS751_LOW_BYTE_REG
 245              		.section	.rodata.STTS751_LOW_BYTE_REG,"a"
 248              	STTS751_LOW_BYTE_REG:
 249 0000 02       		.byte	2
 250              		.global	STTS751_STATUS_REG
 251              		.section	.rodata.STTS751_STATUS_REG,"a"
 254              	STTS751_STATUS_REG:
 255 0000 01       		.byte	1
 256              		.global	STTS751_HIGH_BYTE_REG
 257              		.section	.rodata.STTS751_HIGH_BYTE_REG,"a"
 260              	STTS751_HIGH_BYTE_REG:
 261 0000 00       		.space	1
 262              		.text
 263              	.Letext0:
 264              		.file 2 "C:/Users/vegmi/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-to
 265              		.file 3 "C:/Users/vegmi/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-to
 266              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 267              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 268              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 269              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_i2c.h"
ARM GAS  C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 stts751_temperature_sensor.c
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:19     .text.stts751_init:00000000 $t
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:25     .text.stts751_init:00000000 stts751_init
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:81     .text.stts751_read_temperature:00000000 $t
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:87     .text.stts751_read_temperature:00000000 stts751_read_temperature
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:198    .text.stts751_read_temperature:0000006c $d
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:206    .rodata.STTS751_DATA_SIZE:00000000 STTS751_DATA_SIZE
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:212    .rodata.STTS751_REG_SIZE:00000000 STTS751_REG_SIZE
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:218    .rodata.STTS751_CONV_DATA:00000000 STTS751_CONV_DATA
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:224    .rodata.STTS751_CONF_DATA:00000000 STTS751_CONF_DATA
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:230    .rodata.STTS751_ADDR_REG:00000000 STTS751_ADDR_REG
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:236    .rodata.STTS751_CONV_REG:00000000 STTS751_CONV_REG
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:242    .rodata.STTS751_CONF_REG:00000000 STTS751_CONF_REG
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:248    .rodata.STTS751_LOW_BYTE_REG:00000000 STTS751_LOW_BYTE_REG
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:254    .rodata.STTS751_STATUS_REG:00000000 STTS751_STATUS_REG
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:260    .rodata.STTS751_HIGH_BYTE_REG:00000000 STTS751_HIGH_BYTE_REG
C:\Users\vegmi\AppData\Local\Temp\ccPHuyPs.s:261    .rodata.STTS751_HIGH_BYTE_REG:00000000 $d

UNDEFINED SYMBOLS
HAL_I2C_Mem_Write
__aeabi_i2f
__aeabi_fmul
HAL_I2C_Mem_Read
